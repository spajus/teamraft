<% if person.errors.any? %>
  Sorry: <%= person.errors.messages.entries.join %>
<% end %>
<div class="row">
  <div class="col-md-6">
    <%= form_tag do %>
      <div class="form-group">
        <%= label_tag 'Company Name' %>
        <div>
          <%= company.name %>
        </div>
      </div>
      <div class="form-group">
        <%= label_tag 'Name' %>
        <%= text_field_tag 'person[name]', person.name, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= label_tag 'Email' %>
        <%= email_field_tag 'person[email]', person.email, class: 'form-control' %>
      </div>
      <% unless person_signed_in? %>
        <div class="form-group">
          <%= label_tag 'Password' %>
          <%= password_field_tag 'person[password]', class: 'form-control' %>
        </div>
      <% end %>

      <%= render partial: 'attribute_field', collection: company.attribute_types, locals: { person: person } %>

      <%= button_tag 'Register', type: :submit, class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>
